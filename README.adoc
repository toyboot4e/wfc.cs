= Wfc

wfc.cs is an implementation of the https://github.com/mxgmn/WaveFunctionCollapse[WaveFunctionCollapse algorithm] (OverlappingModel) for tile maps, based on [the post by gridbugs](https://gridbugs.org/wave-function-collapse/).

Note that it's not set up for others: not well refactored, the input file is hard coded, and even using uncommon format!

== Notes

* The OverlappingModel is really _slow_, so I'm considering using SimpleTiledModel following [Roguelike Tutorial - in Rust](https://bfnightly.bracketproductions.com/rustbook/chapter_33.html)
* WFC can be used to fill a segment, like [done in Caves of Qud](https://www.youtube.com/watch?v=fnFj3dOKcIQ)

== Running an example

If you're using VSCode, there's `.vscode/tasks.json` to run the Example project. Or run it typing some commands:

[source,sh]
----
$ dotnet run --project Example/Example.csproj
~~ omitted ~~
=== Source map===

###.########.###
###.#####......#
#.....###......#
#.....###......#
#...............
......###......#
#.....###......#
##.######......#
##.########.####
##.########.####
##......##....##
........##......
##............##
##......##....##
##......####.###
###.########.###

FAIL
SUCCESS
=== Output: ===
#######.#####.###.###......##...###.
....###.#####.###.###.###..##...###.
....###.###.......###.###.......###.
....###.###............##..##...##..
....##...##.......##...##..##...##..
....##...##.......##.####..#########
....#######.......##.####..#########
#.#########.......##.##########...##
#.##########.###.###.##########.....
.....#######.###.###.....##..##...##
.....##...##.##..........##.......##
#######...##.##...##.........##...##
#######...##.##########.####.#######
#######...##.##########.####.#######
#....#######.###...####.........####
#....#######.###................####
.....###...........####.........####
#....###......##...####.........####
###.####......##...####.........####
###.####......#########.........####
##....##......################.###..
##....##......##....##########.###..
########............####..####.###..
########......##....####..####.###..
########......##....#########...####
#.....##............#########...####
#.............##....#########...##..
#.....###.###.###########..##...##..
......###.###.###########.......##..
#.....###.##...####..####..##.......
#.....##..##...####........##...##..
#.....##.............####..##...##.#
#.........###.######.####.########.#
......##..###.######.####.########.#
##.#####.....................##.....
##.#####..##.................##.....

             .###.###.##
          #.......###.###..
         ##............##..#
       ..##.......##...##..##.
      ...##.......##.####..####
     ######.......##.####..#####
    #######.......##.##########..
    ########.###.###.##########..
   ..#######.###.###.....##..##...
  ...##...##.##..........##.......#
  #####...##.##...##.........##...#
  #####...##.##########.####.######
 ######...##.##########.####.#######
 ....#######.###...####.........####
 ....#######.###................####
 ....###...........####.........####
 ....###......##...####.........####
 ##.####......##...####.........####
 ##.####......#########.........####
 #....##......################.###..
 #....##......##....##########.###..
 #######............####..####.###..
 #######......##....####..####.###..
  ######......##....#########...###
  ....##............#########...###
  ............##....#########...##.
   ...###.###.###########..##...##
    ..###.###.###########.......#
    ..###.##...####..####..##....
     .##..##...####........##...
      ##.............####..##..
       ...###.######.####.####
         .###.######.####.##
          .................
             ...........
----

You'll find it's slow!

== TODO

=== High priority

* remove entory and just use `totalWeight / maxTotalWeight`

=== Low priority

* make it more generic
* add CLI
